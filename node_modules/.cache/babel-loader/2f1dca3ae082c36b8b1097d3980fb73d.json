{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport classNames from 'classnames';\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\nimport * as React from 'react';\nimport { usePanelContext } from \"../../context\";\nimport useScrollTo from \"./useScrollTo\";\nvar SCROLL_DELAY = 300;\nexport default function TimeColumn(props) {\n  var units = props.units,\n      value = props.value,\n      optionalValue = props.optionalValue,\n      type = props.type,\n      onChange = props.onChange,\n      onDblClick = props.onDblClick,\n      changeOnScroll = props.changeOnScroll;\n\n  var _usePanelContext = usePanelContext(),\n      prefixCls = _usePanelContext.prefixCls,\n      cellRender = _usePanelContext.cellRender,\n      now = _usePanelContext.now,\n      locale = _usePanelContext.locale;\n\n  var panelPrefixCls = \"\".concat(prefixCls, \"-time-panel\");\n  var cellPrefixCls = \"\".concat(prefixCls, \"-time-panel-cell\"); // ========================== Refs ==========================\n\n  var ulRef = React.useRef(null); // ========================= Scroll =========================\n\n  var checkDelayRef = React.useRef();\n\n  var clearDelayCheck = function clearDelayCheck() {\n    clearTimeout(checkDelayRef.current);\n  }; // ========================== Sync ==========================\n\n\n  var _useScrollTo = useScrollTo(ulRef, value !== null && value !== void 0 ? value : optionalValue),\n      _useScrollTo2 = _slicedToArray(_useScrollTo, 3),\n      syncScroll = _useScrollTo2[0],\n      stopScroll = _useScrollTo2[1],\n      isScrolling = _useScrollTo2[2]; // Effect sync value scroll\n\n\n  useLayoutEffect(function () {\n    syncScroll();\n    clearDelayCheck();\n    return function () {\n      stopScroll();\n      clearDelayCheck();\n    };\n  }, [value, optionalValue, units]); // ========================= Change =========================\n  // Scroll event if sync onScroll\n\n  var onInternalScroll = function onInternalScroll(event) {\n    clearDelayCheck();\n    var target = event.target;\n\n    if (!isScrolling() && changeOnScroll) {\n      checkDelayRef.current = setTimeout(function () {\n        var ul = ulRef.current;\n        var firstLiTop = ul.querySelector(\"li\").offsetTop;\n        var liList = Array.from(ul.querySelectorAll(\"li\"));\n        var liTopList = liList.map(function (li) {\n          return li.offsetTop - firstLiTop;\n        });\n        var liDistList = liTopList.map(function (top, index) {\n          if (units[index].disabled) {\n            return Number.MAX_SAFE_INTEGER;\n          }\n\n          return Math.abs(top - target.scrollTop);\n        }); // Find min distance index\n\n        var minDist = Math.min.apply(Math, _toConsumableArray(liDistList));\n        var minDistIndex = liDistList.findIndex(function (dist) {\n          return dist === minDist;\n        });\n        var targetUnit = units[minDistIndex];\n\n        if (targetUnit && !targetUnit.disabled) {\n          onChange(targetUnit.value);\n        }\n      }, SCROLL_DELAY);\n    }\n  }; // ========================= Render =========================\n\n\n  var columnPrefixCls = \"\".concat(panelPrefixCls, \"-column\");\n  return /*#__PURE__*/React.createElement(\"ul\", {\n    className: columnPrefixCls,\n    ref: ulRef,\n    \"data-type\": type,\n    onScroll: onInternalScroll\n  }, units.map(function (_ref) {\n    var label = _ref.label,\n        unitValue = _ref.value,\n        disabled = _ref.disabled;\n    var inner = /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(cellPrefixCls, \"-inner\")\n    }, label);\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: unitValue,\n      className: classNames(cellPrefixCls, _defineProperty(_defineProperty({}, \"\".concat(cellPrefixCls, \"-selected\"), value === unitValue), \"\".concat(cellPrefixCls, \"-disabled\"), disabled)),\n      onClick: function onClick() {\n        if (!disabled) {\n          onChange(unitValue);\n        }\n      },\n      onDoubleClick: function onDoubleClick() {\n        if (!disabled && onDblClick) {\n          onDblClick();\n        }\n      },\n      \"data-value\": unitValue\n    }, cellRender ? cellRender(unitValue, {\n      prefixCls: prefixCls,\n      originNode: inner,\n      today: now,\n      type: 'time',\n      subType: type,\n      locale: locale\n    }) : inner);\n  }));\n}","map":{"version":3,"names":["_defineProperty","_toConsumableArray","_slicedToArray","classNames","useLayoutEffect","React","usePanelContext","useScrollTo","SCROLL_DELAY","TimeColumn","props","units","value","optionalValue","type","onChange","onDblClick","changeOnScroll","_usePanelContext","prefixCls","cellRender","now","locale","panelPrefixCls","concat","cellPrefixCls","ulRef","useRef","checkDelayRef","clearDelayCheck","clearTimeout","current","_useScrollTo","_useScrollTo2","syncScroll","stopScroll","isScrolling","onInternalScroll","event","target","setTimeout","ul","firstLiTop","querySelector","offsetTop","liList","Array","from","querySelectorAll","liTopList","map","li","liDistList","top","index","disabled","Number","MAX_SAFE_INTEGER","Math","abs","scrollTop","minDist","min","apply","minDistIndex","findIndex","dist","targetUnit","columnPrefixCls","createElement","className","ref","onScroll","_ref","label","unitValue","inner","key","onClick","onDoubleClick","originNode","today","subType"],"sources":["/Users/joji/Documents/CODE/React/react-cutioluis/node_modules/rc-picker/es/PickerPanel/TimePanel/TimePanelBody/TimeColumn.js"],"sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport classNames from 'classnames';\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\nimport * as React from 'react';\nimport { usePanelContext } from \"../../context\";\nimport useScrollTo from \"./useScrollTo\";\nvar SCROLL_DELAY = 300;\nexport default function TimeColumn(props) {\n  var units = props.units,\n    value = props.value,\n    optionalValue = props.optionalValue,\n    type = props.type,\n    onChange = props.onChange,\n    onDblClick = props.onDblClick,\n    changeOnScroll = props.changeOnScroll;\n  var _usePanelContext = usePanelContext(),\n    prefixCls = _usePanelContext.prefixCls,\n    cellRender = _usePanelContext.cellRender,\n    now = _usePanelContext.now,\n    locale = _usePanelContext.locale;\n  var panelPrefixCls = \"\".concat(prefixCls, \"-time-panel\");\n  var cellPrefixCls = \"\".concat(prefixCls, \"-time-panel-cell\");\n\n  // ========================== Refs ==========================\n  var ulRef = React.useRef(null);\n\n  // ========================= Scroll =========================\n  var checkDelayRef = React.useRef();\n  var clearDelayCheck = function clearDelayCheck() {\n    clearTimeout(checkDelayRef.current);\n  };\n\n  // ========================== Sync ==========================\n  var _useScrollTo = useScrollTo(ulRef, value !== null && value !== void 0 ? value : optionalValue),\n    _useScrollTo2 = _slicedToArray(_useScrollTo, 3),\n    syncScroll = _useScrollTo2[0],\n    stopScroll = _useScrollTo2[1],\n    isScrolling = _useScrollTo2[2];\n\n  // Effect sync value scroll\n  useLayoutEffect(function () {\n    syncScroll();\n    clearDelayCheck();\n    return function () {\n      stopScroll();\n      clearDelayCheck();\n    };\n  }, [value, optionalValue, units]);\n\n  // ========================= Change =========================\n  // Scroll event if sync onScroll\n  var onInternalScroll = function onInternalScroll(event) {\n    clearDelayCheck();\n    var target = event.target;\n    if (!isScrolling() && changeOnScroll) {\n      checkDelayRef.current = setTimeout(function () {\n        var ul = ulRef.current;\n        var firstLiTop = ul.querySelector(\"li\").offsetTop;\n        var liList = Array.from(ul.querySelectorAll(\"li\"));\n        var liTopList = liList.map(function (li) {\n          return li.offsetTop - firstLiTop;\n        });\n        var liDistList = liTopList.map(function (top, index) {\n          if (units[index].disabled) {\n            return Number.MAX_SAFE_INTEGER;\n          }\n          return Math.abs(top - target.scrollTop);\n        });\n\n        // Find min distance index\n        var minDist = Math.min.apply(Math, _toConsumableArray(liDistList));\n        var minDistIndex = liDistList.findIndex(function (dist) {\n          return dist === minDist;\n        });\n        var targetUnit = units[minDistIndex];\n        if (targetUnit && !targetUnit.disabled) {\n          onChange(targetUnit.value);\n        }\n      }, SCROLL_DELAY);\n    }\n  };\n\n  // ========================= Render =========================\n  var columnPrefixCls = \"\".concat(panelPrefixCls, \"-column\");\n  return /*#__PURE__*/React.createElement(\"ul\", {\n    className: columnPrefixCls,\n    ref: ulRef,\n    \"data-type\": type,\n    onScroll: onInternalScroll\n  }, units.map(function (_ref) {\n    var label = _ref.label,\n      unitValue = _ref.value,\n      disabled = _ref.disabled;\n    var inner = /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(cellPrefixCls, \"-inner\")\n    }, label);\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: unitValue,\n      className: classNames(cellPrefixCls, _defineProperty(_defineProperty({}, \"\".concat(cellPrefixCls, \"-selected\"), value === unitValue), \"\".concat(cellPrefixCls, \"-disabled\"), disabled)),\n      onClick: function onClick() {\n        if (!disabled) {\n          onChange(unitValue);\n        }\n      },\n      onDoubleClick: function onDoubleClick() {\n        if (!disabled && onDblClick) {\n          onDblClick();\n        }\n      },\n      \"data-value\": unitValue\n    }, cellRender ? cellRender(unitValue, {\n      prefixCls: prefixCls,\n      originNode: inner,\n      today: now,\n      type: 'time',\n      subType: type,\n      locale: locale\n    }) : inner);\n  }));\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}