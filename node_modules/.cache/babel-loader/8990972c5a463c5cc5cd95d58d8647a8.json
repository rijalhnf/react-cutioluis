{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { getClientSize } from \"rc-util/es/Dom/css\";\nimport isEqual from \"rc-util/es/isEqual\";\nimport raf from \"rc-util/es/raf\";\nimport { useRef, useState } from 'react';\nvar initialTransform = {\n  x: 0,\n  y: 0,\n  rotate: 0,\n  scale: 1,\n  flipX: false,\n  flipY: false\n};\nexport default function useImageTransform(imgRef, minScale, maxScale, onTransform) {\n  var frame = useRef(null);\n  var queue = useRef([]);\n\n  var _useState = useState(initialTransform),\n      _useState2 = _slicedToArray(_useState, 2),\n      transform = _useState2[0],\n      setTransform = _useState2[1];\n\n  var resetTransform = function resetTransform(action) {\n    setTransform(initialTransform);\n\n    if (onTransform && !isEqual(initialTransform, transform)) {\n      onTransform({\n        transform: initialTransform,\n        action: action\n      });\n    }\n  };\n  /** Direct update transform */\n\n\n  var updateTransform = function updateTransform(newTransform, action) {\n    if (frame.current === null) {\n      queue.current = [];\n      frame.current = raf(function () {\n        setTransform(function (preState) {\n          var memoState = preState;\n          queue.current.forEach(function (queueState) {\n            memoState = _objectSpread(_objectSpread({}, memoState), queueState);\n          });\n          frame.current = null;\n          onTransform === null || onTransform === void 0 || onTransform({\n            transform: memoState,\n            action: action\n          });\n          return memoState;\n        });\n      });\n    }\n\n    queue.current.push(_objectSpread(_objectSpread({}, transform), newTransform));\n  };\n  /** Scale according to the position of centerX and centerY */\n\n\n  var dispatchZoomChange = function dispatchZoomChange(ratio, action, centerX, centerY, isTouch) {\n    var _imgRef$current = imgRef.current,\n        width = _imgRef$current.width,\n        height = _imgRef$current.height,\n        offsetWidth = _imgRef$current.offsetWidth,\n        offsetHeight = _imgRef$current.offsetHeight,\n        offsetLeft = _imgRef$current.offsetLeft,\n        offsetTop = _imgRef$current.offsetTop;\n    var newRatio = ratio;\n    var newScale = transform.scale * ratio;\n\n    if (newScale > maxScale) {\n      newScale = maxScale;\n      newRatio = maxScale / transform.scale;\n    } else if (newScale < minScale) {\n      // For mobile interactions, allow scaling down to the minimum scale.\n      newScale = isTouch ? newScale : minScale;\n      newRatio = newScale / transform.scale;\n    }\n    /** Default center point scaling */\n\n\n    var mergedCenterX = centerX !== null && centerX !== void 0 ? centerX : innerWidth / 2;\n    var mergedCenterY = centerY !== null && centerY !== void 0 ? centerY : innerHeight / 2;\n    var diffRatio = newRatio - 1;\n    /** Deviation calculated from image size */\n\n    var diffImgX = diffRatio * width * 0.5;\n    var diffImgY = diffRatio * height * 0.5;\n    /** The difference between the click position and the edge of the document */\n\n    var diffOffsetLeft = diffRatio * (mergedCenterX - transform.x - offsetLeft);\n    var diffOffsetTop = diffRatio * (mergedCenterY - transform.y - offsetTop);\n    /** Final positioning */\n\n    var newX = transform.x - (diffOffsetLeft - diffImgX);\n    var newY = transform.y - (diffOffsetTop - diffImgY);\n    /**\n     * When zooming the image\n     * When the image size is smaller than the width and height of the window, the position is initialized\n     */\n\n    if (ratio < 1 && newScale === 1) {\n      var mergedWidth = offsetWidth * newScale;\n      var mergedHeight = offsetHeight * newScale;\n\n      var _getClientSize = getClientSize(),\n          clientWidth = _getClientSize.width,\n          clientHeight = _getClientSize.height;\n\n      if (mergedWidth <= clientWidth && mergedHeight <= clientHeight) {\n        newX = 0;\n        newY = 0;\n      }\n    }\n\n    updateTransform({\n      x: newX,\n      y: newY,\n      scale: newScale\n    }, action);\n  };\n\n  return {\n    transform: transform,\n    resetTransform: resetTransform,\n    updateTransform: updateTransform,\n    dispatchZoomChange: dispatchZoomChange\n  };\n}","map":{"version":3,"names":["_objectSpread","_slicedToArray","getClientSize","isEqual","raf","useRef","useState","initialTransform","x","y","rotate","scale","flipX","flipY","useImageTransform","imgRef","minScale","maxScale","onTransform","frame","queue","_useState","_useState2","transform","setTransform","resetTransform","action","updateTransform","newTransform","current","preState","memoState","forEach","queueState","push","dispatchZoomChange","ratio","centerX","centerY","isTouch","_imgRef$current","width","height","offsetWidth","offsetHeight","offsetLeft","offsetTop","newRatio","newScale","mergedCenterX","innerWidth","mergedCenterY","innerHeight","diffRatio","diffImgX","diffImgY","diffOffsetLeft","diffOffsetTop","newX","newY","mergedWidth","mergedHeight","_getClientSize","clientWidth","clientHeight"],"sources":["/Users/joji/Downloads/react-cutioluis-main copy/node_modules/rc-image/es/hooks/useImageTransform.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { getClientSize } from \"rc-util/es/Dom/css\";\nimport isEqual from \"rc-util/es/isEqual\";\nimport raf from \"rc-util/es/raf\";\nimport { useRef, useState } from 'react';\nvar initialTransform = {\n  x: 0,\n  y: 0,\n  rotate: 0,\n  scale: 1,\n  flipX: false,\n  flipY: false\n};\nexport default function useImageTransform(imgRef, minScale, maxScale, onTransform) {\n  var frame = useRef(null);\n  var queue = useRef([]);\n  var _useState = useState(initialTransform),\n    _useState2 = _slicedToArray(_useState, 2),\n    transform = _useState2[0],\n    setTransform = _useState2[1];\n  var resetTransform = function resetTransform(action) {\n    setTransform(initialTransform);\n    if (onTransform && !isEqual(initialTransform, transform)) {\n      onTransform({\n        transform: initialTransform,\n        action: action\n      });\n    }\n  };\n\n  /** Direct update transform */\n  var updateTransform = function updateTransform(newTransform, action) {\n    if (frame.current === null) {\n      queue.current = [];\n      frame.current = raf(function () {\n        setTransform(function (preState) {\n          var memoState = preState;\n          queue.current.forEach(function (queueState) {\n            memoState = _objectSpread(_objectSpread({}, memoState), queueState);\n          });\n          frame.current = null;\n          onTransform === null || onTransform === void 0 || onTransform({\n            transform: memoState,\n            action: action\n          });\n          return memoState;\n        });\n      });\n    }\n    queue.current.push(_objectSpread(_objectSpread({}, transform), newTransform));\n  };\n\n  /** Scale according to the position of centerX and centerY */\n  var dispatchZoomChange = function dispatchZoomChange(ratio, action, centerX, centerY, isTouch) {\n    var _imgRef$current = imgRef.current,\n      width = _imgRef$current.width,\n      height = _imgRef$current.height,\n      offsetWidth = _imgRef$current.offsetWidth,\n      offsetHeight = _imgRef$current.offsetHeight,\n      offsetLeft = _imgRef$current.offsetLeft,\n      offsetTop = _imgRef$current.offsetTop;\n    var newRatio = ratio;\n    var newScale = transform.scale * ratio;\n    if (newScale > maxScale) {\n      newScale = maxScale;\n      newRatio = maxScale / transform.scale;\n    } else if (newScale < minScale) {\n      // For mobile interactions, allow scaling down to the minimum scale.\n      newScale = isTouch ? newScale : minScale;\n      newRatio = newScale / transform.scale;\n    }\n\n    /** Default center point scaling */\n    var mergedCenterX = centerX !== null && centerX !== void 0 ? centerX : innerWidth / 2;\n    var mergedCenterY = centerY !== null && centerY !== void 0 ? centerY : innerHeight / 2;\n    var diffRatio = newRatio - 1;\n    /** Deviation calculated from image size */\n    var diffImgX = diffRatio * width * 0.5;\n    var diffImgY = diffRatio * height * 0.5;\n    /** The difference between the click position and the edge of the document */\n    var diffOffsetLeft = diffRatio * (mergedCenterX - transform.x - offsetLeft);\n    var diffOffsetTop = diffRatio * (mergedCenterY - transform.y - offsetTop);\n    /** Final positioning */\n    var newX = transform.x - (diffOffsetLeft - diffImgX);\n    var newY = transform.y - (diffOffsetTop - diffImgY);\n\n    /**\n     * When zooming the image\n     * When the image size is smaller than the width and height of the window, the position is initialized\n     */\n    if (ratio < 1 && newScale === 1) {\n      var mergedWidth = offsetWidth * newScale;\n      var mergedHeight = offsetHeight * newScale;\n      var _getClientSize = getClientSize(),\n        clientWidth = _getClientSize.width,\n        clientHeight = _getClientSize.height;\n      if (mergedWidth <= clientWidth && mergedHeight <= clientHeight) {\n        newX = 0;\n        newY = 0;\n      }\n    }\n    updateTransform({\n      x: newX,\n      y: newY,\n      scale: newScale\n    }, action);\n  };\n  return {\n    transform: transform,\n    resetTransform: resetTransform,\n    updateTransform: updateTransform,\n    dispatchZoomChange: dispatchZoomChange\n  };\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}