{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { warning } from \"rc-util/es/warning\";\nimport { getShadowRoot } from \"rc-util/es/Dom/shadow\";\nimport raf from \"rc-util/es/raf\";\nimport * as React from 'react';\nimport { getWin } from \"../util\";\nexport default function useWinClick(open, clickToHide, targetEle, popupEle, mask, maskClosable, inPopupOrChild, triggerOpen) {\n  var openRef = React.useRef(open); // Window click to hide should be lock to avoid trigger lock immediately\n\n  var lockRef = React.useRef(false);\n\n  if (openRef.current !== open) {\n    lockRef.current = true;\n    openRef.current = open;\n  }\n\n  React.useEffect(function () {\n    var id = raf(function () {\n      lockRef.current = false;\n    });\n    return function () {\n      raf.cancel(id);\n    };\n  }, [open]); // Click to hide is special action since click popup element should not hide\n\n  React.useEffect(function () {\n    if (clickToHide && popupEle && (!mask || maskClosable)) {\n      var genClickEvents = function genClickEvents() {\n        var clickInside = false; // User may mouseDown inside and drag out of popup and mouse up\n        // Record here to prevent close\n\n        var onWindowMouseDown = function onWindowMouseDown(_ref) {\n          var target = _ref.target;\n          clickInside = inPopupOrChild(target);\n        };\n\n        var onWindowClick = function onWindowClick(_ref2) {\n          var target = _ref2.target;\n\n          if (!lockRef.current && openRef.current && !clickInside && !inPopupOrChild(target)) {\n            triggerOpen(false);\n          }\n        };\n\n        return [onWindowMouseDown, onWindowClick];\n      }; // Events\n\n\n      var _genClickEvents = genClickEvents(),\n          _genClickEvents2 = _slicedToArray(_genClickEvents, 2),\n          onWinMouseDown = _genClickEvents2[0],\n          onWinClick = _genClickEvents2[1];\n\n      var _genClickEvents3 = genClickEvents(),\n          _genClickEvents4 = _slicedToArray(_genClickEvents3, 2),\n          onShadowMouseDown = _genClickEvents4[0],\n          onShadowClick = _genClickEvents4[1];\n\n      var win = getWin(popupEle);\n      win.addEventListener('mousedown', onWinMouseDown, true);\n      win.addEventListener('click', onWinClick, true);\n      win.addEventListener('contextmenu', onWinClick, true); // shadow root\n\n      var targetShadowRoot = getShadowRoot(targetEle);\n\n      if (targetShadowRoot) {\n        targetShadowRoot.addEventListener('mousedown', onShadowMouseDown, true);\n        targetShadowRoot.addEventListener('click', onShadowClick, true);\n        targetShadowRoot.addEventListener('contextmenu', onShadowClick, true);\n      } // Warning if target and popup not in same root\n\n\n      if (process.env.NODE_ENV !== 'production') {\n        var _targetEle$getRootNod, _popupEle$getRootNode;\n\n        var targetRoot = targetEle === null || targetEle === void 0 || (_targetEle$getRootNod = targetEle.getRootNode) === null || _targetEle$getRootNod === void 0 ? void 0 : _targetEle$getRootNod.call(targetEle);\n        var popupRoot = (_popupEle$getRootNode = popupEle.getRootNode) === null || _popupEle$getRootNode === void 0 ? void 0 : _popupEle$getRootNode.call(popupEle);\n        warning(targetRoot === popupRoot, \"trigger element and popup element should in same shadow root.\");\n      }\n\n      return function () {\n        win.removeEventListener('mousedown', onWinMouseDown, true);\n        win.removeEventListener('click', onWinClick, true);\n        win.removeEventListener('contextmenu', onWinClick, true);\n\n        if (targetShadowRoot) {\n          targetShadowRoot.removeEventListener('mousedown', onShadowMouseDown, true);\n          targetShadowRoot.removeEventListener('click', onShadowClick, true);\n          targetShadowRoot.removeEventListener('contextmenu', onShadowClick, true);\n        }\n      };\n    }\n  }, [clickToHide, targetEle, popupEle, mask, maskClosable]);\n}","map":{"version":3,"names":["_slicedToArray","warning","getShadowRoot","raf","React","getWin","useWinClick","open","clickToHide","targetEle","popupEle","mask","maskClosable","inPopupOrChild","triggerOpen","openRef","useRef","lockRef","current","useEffect","id","cancel","genClickEvents","clickInside","onWindowMouseDown","_ref","target","onWindowClick","_ref2","_genClickEvents","_genClickEvents2","onWinMouseDown","onWinClick","_genClickEvents3","_genClickEvents4","onShadowMouseDown","onShadowClick","win","addEventListener","targetShadowRoot","process","env","NODE_ENV","_targetEle$getRootNod","_popupEle$getRootNode","targetRoot","getRootNode","call","popupRoot","removeEventListener"],"sources":["/Users/joji/Downloads/react-cutioluis-main copy/node_modules/@rc-component/trigger/es/hooks/useWinClick.js"],"sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { warning } from \"rc-util/es/warning\";\nimport { getShadowRoot } from \"rc-util/es/Dom/shadow\";\nimport raf from \"rc-util/es/raf\";\nimport * as React from 'react';\nimport { getWin } from \"../util\";\nexport default function useWinClick(open, clickToHide, targetEle, popupEle, mask, maskClosable, inPopupOrChild, triggerOpen) {\n  var openRef = React.useRef(open);\n\n  // Window click to hide should be lock to avoid trigger lock immediately\n  var lockRef = React.useRef(false);\n  if (openRef.current !== open) {\n    lockRef.current = true;\n    openRef.current = open;\n  }\n  React.useEffect(function () {\n    var id = raf(function () {\n      lockRef.current = false;\n    });\n    return function () {\n      raf.cancel(id);\n    };\n  }, [open]);\n\n  // Click to hide is special action since click popup element should not hide\n  React.useEffect(function () {\n    if (clickToHide && popupEle && (!mask || maskClosable)) {\n      var genClickEvents = function genClickEvents() {\n        var clickInside = false;\n\n        // User may mouseDown inside and drag out of popup and mouse up\n        // Record here to prevent close\n        var onWindowMouseDown = function onWindowMouseDown(_ref) {\n          var target = _ref.target;\n          clickInside = inPopupOrChild(target);\n        };\n        var onWindowClick = function onWindowClick(_ref2) {\n          var target = _ref2.target;\n          if (!lockRef.current && openRef.current && !clickInside && !inPopupOrChild(target)) {\n            triggerOpen(false);\n          }\n        };\n        return [onWindowMouseDown, onWindowClick];\n      };\n\n      // Events\n      var _genClickEvents = genClickEvents(),\n        _genClickEvents2 = _slicedToArray(_genClickEvents, 2),\n        onWinMouseDown = _genClickEvents2[0],\n        onWinClick = _genClickEvents2[1];\n      var _genClickEvents3 = genClickEvents(),\n        _genClickEvents4 = _slicedToArray(_genClickEvents3, 2),\n        onShadowMouseDown = _genClickEvents4[0],\n        onShadowClick = _genClickEvents4[1];\n      var win = getWin(popupEle);\n      win.addEventListener('mousedown', onWinMouseDown, true);\n      win.addEventListener('click', onWinClick, true);\n      win.addEventListener('contextmenu', onWinClick, true);\n\n      // shadow root\n      var targetShadowRoot = getShadowRoot(targetEle);\n      if (targetShadowRoot) {\n        targetShadowRoot.addEventListener('mousedown', onShadowMouseDown, true);\n        targetShadowRoot.addEventListener('click', onShadowClick, true);\n        targetShadowRoot.addEventListener('contextmenu', onShadowClick, true);\n      }\n\n      // Warning if target and popup not in same root\n      if (process.env.NODE_ENV !== 'production') {\n        var _targetEle$getRootNod, _popupEle$getRootNode;\n        var targetRoot = targetEle === null || targetEle === void 0 || (_targetEle$getRootNod = targetEle.getRootNode) === null || _targetEle$getRootNod === void 0 ? void 0 : _targetEle$getRootNod.call(targetEle);\n        var popupRoot = (_popupEle$getRootNode = popupEle.getRootNode) === null || _popupEle$getRootNode === void 0 ? void 0 : _popupEle$getRootNode.call(popupEle);\n        warning(targetRoot === popupRoot, \"trigger element and popup element should in same shadow root.\");\n      }\n      return function () {\n        win.removeEventListener('mousedown', onWinMouseDown, true);\n        win.removeEventListener('click', onWinClick, true);\n        win.removeEventListener('contextmenu', onWinClick, true);\n        if (targetShadowRoot) {\n          targetShadowRoot.removeEventListener('mousedown', onShadowMouseDown, true);\n          targetShadowRoot.removeEventListener('click', onShadowClick, true);\n          targetShadowRoot.removeEventListener('contextmenu', onShadowClick, true);\n        }\n      };\n    }\n  }, [clickToHide, targetEle, popupEle, mask, maskClosable]);\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}