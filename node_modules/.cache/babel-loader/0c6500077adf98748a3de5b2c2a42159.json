{"ast":null,"code":"import KeyCode from \"rc-util/es/KeyCode\";\nimport raf from \"rc-util/es/raf\";\nimport * as React from \"react\";\nvar ESC = KeyCode.ESC,\n    TAB = KeyCode.TAB;\nexport default function useAccessibility(_ref) {\n  var visible = _ref.visible,\n      triggerRef = _ref.triggerRef,\n      onVisibleChange = _ref.onVisibleChange,\n      autoFocus = _ref.autoFocus,\n      overlayRef = _ref.overlayRef;\n  var focusMenuRef = React.useRef(false);\n\n  var handleCloseMenuAndReturnFocus = function handleCloseMenuAndReturnFocus() {\n    if (visible) {\n      var _triggerRef$current, _triggerRef$current$f;\n\n      (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : (_triggerRef$current$f = _triggerRef$current.focus) === null || _triggerRef$current$f === void 0 ? void 0 : _triggerRef$current$f.call(_triggerRef$current);\n      onVisibleChange === null || onVisibleChange === void 0 ? void 0 : onVisibleChange(false);\n    }\n  };\n\n  var focusMenu = function focusMenu() {\n    var _overlayRef$current;\n\n    if ((_overlayRef$current = overlayRef.current) !== null && _overlayRef$current !== void 0 && _overlayRef$current.focus) {\n      overlayRef.current.focus();\n      focusMenuRef.current = true;\n      return true;\n    }\n\n    return false;\n  };\n\n  var handleKeyDown = function handleKeyDown(event) {\n    switch (event.keyCode) {\n      case ESC:\n        handleCloseMenuAndReturnFocus();\n        break;\n\n      case TAB:\n        {\n          var focusResult = false;\n\n          if (!focusMenuRef.current) {\n            focusResult = focusMenu();\n          }\n\n          if (focusResult) {\n            event.preventDefault();\n          } else {\n            handleCloseMenuAndReturnFocus();\n          }\n\n          break;\n        }\n    }\n  };\n\n  React.useEffect(function () {\n    if (visible) {\n      window.addEventListener(\"keydown\", handleKeyDown);\n\n      if (autoFocus) {\n        // FIXME: hack with raf\n        raf(focusMenu, 3);\n      }\n\n      return function () {\n        window.removeEventListener(\"keydown\", handleKeyDown);\n        focusMenuRef.current = false;\n      };\n    }\n\n    return function () {\n      focusMenuRef.current = false;\n    };\n  }, [visible]); // eslint-disable-line react-hooks/exhaustive-deps\n}","map":{"version":3,"names":["KeyCode","raf","React","ESC","TAB","useAccessibility","_ref","visible","triggerRef","onVisibleChange","autoFocus","overlayRef","focusMenuRef","useRef","handleCloseMenuAndReturnFocus","_triggerRef$current","_triggerRef$current$f","current","focus","call","focusMenu","_overlayRef$current","handleKeyDown","event","keyCode","focusResult","preventDefault","useEffect","window","addEventListener","removeEventListener"],"sources":["/Users/joji/Downloads/react-cutioluis-main copy/node_modules/rc-dropdown/es/hooks/useAccessibility.js"],"sourcesContent":["import KeyCode from \"rc-util/es/KeyCode\";\nimport raf from \"rc-util/es/raf\";\nimport * as React from \"react\";\nvar ESC = KeyCode.ESC,\n  TAB = KeyCode.TAB;\nexport default function useAccessibility(_ref) {\n  var visible = _ref.visible,\n    triggerRef = _ref.triggerRef,\n    onVisibleChange = _ref.onVisibleChange,\n    autoFocus = _ref.autoFocus,\n    overlayRef = _ref.overlayRef;\n  var focusMenuRef = React.useRef(false);\n  var handleCloseMenuAndReturnFocus = function handleCloseMenuAndReturnFocus() {\n    if (visible) {\n      var _triggerRef$current, _triggerRef$current$f;\n      (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : (_triggerRef$current$f = _triggerRef$current.focus) === null || _triggerRef$current$f === void 0 ? void 0 : _triggerRef$current$f.call(_triggerRef$current);\n      onVisibleChange === null || onVisibleChange === void 0 ? void 0 : onVisibleChange(false);\n    }\n  };\n  var focusMenu = function focusMenu() {\n    var _overlayRef$current;\n    if ((_overlayRef$current = overlayRef.current) !== null && _overlayRef$current !== void 0 && _overlayRef$current.focus) {\n      overlayRef.current.focus();\n      focusMenuRef.current = true;\n      return true;\n    }\n    return false;\n  };\n  var handleKeyDown = function handleKeyDown(event) {\n    switch (event.keyCode) {\n      case ESC:\n        handleCloseMenuAndReturnFocus();\n        break;\n      case TAB:\n        {\n          var focusResult = false;\n          if (!focusMenuRef.current) {\n            focusResult = focusMenu();\n          }\n          if (focusResult) {\n            event.preventDefault();\n          } else {\n            handleCloseMenuAndReturnFocus();\n          }\n          break;\n        }\n    }\n  };\n  React.useEffect(function () {\n    if (visible) {\n      window.addEventListener(\"keydown\", handleKeyDown);\n      if (autoFocus) {\n        // FIXME: hack with raf\n        raf(focusMenu, 3);\n      }\n      return function () {\n        window.removeEventListener(\"keydown\", handleKeyDown);\n        focusMenuRef.current = false;\n      };\n    }\n    return function () {\n      focusMenuRef.current = false;\n    };\n  }, [visible]); // eslint-disable-line react-hooks/exhaustive-deps\n}"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,oBAApB;AACA,OAAOC,GAAP,MAAgB,gBAAhB;AACA,OAAO,KAAKC,KAAZ,MAAuB,OAAvB;AACA,IAAIC,GAAG,GAAGH,OAAO,CAACG,GAAlB;AAAA,IACEC,GAAG,GAAGJ,OAAO,CAACI,GADhB;AAEA,eAAe,SAASC,gBAAT,CAA0BC,IAA1B,EAAgC;EAC7C,IAAIC,OAAO,GAAGD,IAAI,CAACC,OAAnB;EAAA,IACEC,UAAU,GAAGF,IAAI,CAACE,UADpB;EAAA,IAEEC,eAAe,GAAGH,IAAI,CAACG,eAFzB;EAAA,IAGEC,SAAS,GAAGJ,IAAI,CAACI,SAHnB;EAAA,IAIEC,UAAU,GAAGL,IAAI,CAACK,UAJpB;EAKA,IAAIC,YAAY,GAAGV,KAAK,CAACW,MAAN,CAAa,KAAb,CAAnB;;EACA,IAAIC,6BAA6B,GAAG,SAASA,6BAAT,GAAyC;IAC3E,IAAIP,OAAJ,EAAa;MACX,IAAIQ,mBAAJ,EAAyBC,qBAAzB;;MACA,CAACD,mBAAmB,GAAGP,UAAU,CAACS,OAAlC,MAA+C,IAA/C,IAAuDF,mBAAmB,KAAK,KAAK,CAApF,GAAwF,KAAK,CAA7F,GAAiG,CAACC,qBAAqB,GAAGD,mBAAmB,CAACG,KAA7C,MAAwD,IAAxD,IAAgEF,qBAAqB,KAAK,KAAK,CAA/F,GAAmG,KAAK,CAAxG,GAA4GA,qBAAqB,CAACG,IAAtB,CAA2BJ,mBAA3B,CAA7M;MACAN,eAAe,KAAK,IAApB,IAA4BA,eAAe,KAAK,KAAK,CAArD,GAAyD,KAAK,CAA9D,GAAkEA,eAAe,CAAC,KAAD,CAAjF;IACD;EACF,CAND;;EAOA,IAAIW,SAAS,GAAG,SAASA,SAAT,GAAqB;IACnC,IAAIC,mBAAJ;;IACA,IAAI,CAACA,mBAAmB,GAAGV,UAAU,CAACM,OAAlC,MAA+C,IAA/C,IAAuDI,mBAAmB,KAAK,KAAK,CAApF,IAAyFA,mBAAmB,CAACH,KAAjH,EAAwH;MACtHP,UAAU,CAACM,OAAX,CAAmBC,KAAnB;MACAN,YAAY,CAACK,OAAb,GAAuB,IAAvB;MACA,OAAO,IAAP;IACD;;IACD,OAAO,KAAP;EACD,CARD;;EASA,IAAIK,aAAa,GAAG,SAASA,aAAT,CAAuBC,KAAvB,EAA8B;IAChD,QAAQA,KAAK,CAACC,OAAd;MACE,KAAKrB,GAAL;QACEW,6BAA6B;QAC7B;;MACF,KAAKV,GAAL;QACE;UACE,IAAIqB,WAAW,GAAG,KAAlB;;UACA,IAAI,CAACb,YAAY,CAACK,OAAlB,EAA2B;YACzBQ,WAAW,GAAGL,SAAS,EAAvB;UACD;;UACD,IAAIK,WAAJ,EAAiB;YACfF,KAAK,CAACG,cAAN;UACD,CAFD,MAEO;YACLZ,6BAA6B;UAC9B;;UACD;QACD;IAhBL;EAkBD,CAnBD;;EAoBAZ,KAAK,CAACyB,SAAN,CAAgB,YAAY;IAC1B,IAAIpB,OAAJ,EAAa;MACXqB,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmCP,aAAnC;;MACA,IAAIZ,SAAJ,EAAe;QACb;QACAT,GAAG,CAACmB,SAAD,EAAY,CAAZ,CAAH;MACD;;MACD,OAAO,YAAY;QACjBQ,MAAM,CAACE,mBAAP,CAA2B,SAA3B,EAAsCR,aAAtC;QACAV,YAAY,CAACK,OAAb,GAAuB,KAAvB;MACD,CAHD;IAID;;IACD,OAAO,YAAY;MACjBL,YAAY,CAACK,OAAb,GAAuB,KAAvB;IACD,CAFD;EAGD,CAfD,EAeG,CAACV,OAAD,CAfH,EA3C6C,CA0D9B;AAChB"},"metadata":{},"sourceType":"module"}