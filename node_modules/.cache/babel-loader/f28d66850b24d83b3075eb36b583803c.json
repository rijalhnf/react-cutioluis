{"ast":null,"code":"\"use client\";\n\nimport useState from \"rc-util/es/hooks/useState\";\nimport * as React from 'react';\nimport Button from '../button';\nimport { convertLegacyProps } from '../button/buttonHelpers';\n\nfunction isThenable(thing) {\n  return !!(thing && thing.then);\n}\n\nconst ActionButton = props => {\n  const {\n    type,\n    children,\n    prefixCls,\n    buttonProps,\n    close,\n    autoFocus,\n    emitEvent,\n    isSilent,\n    quitOnNullishReturnValue,\n    actionFn\n  } = props;\n  const clickedRef = React.useRef(false);\n  const buttonRef = React.useRef(null);\n  const [loading, setLoading] = useState(false);\n\n  const onInternalClose = function () {\n    close === null || close === void 0 ? void 0 : close.apply(void 0, arguments);\n  };\n\n  React.useEffect(() => {\n    let timeoutId = null;\n\n    if (autoFocus) {\n      timeoutId = setTimeout(() => {\n        var _a;\n\n        (_a = buttonRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n      });\n    }\n\n    return () => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, []);\n\n  const handlePromiseOnOk = returnValueOfOnOk => {\n    if (!isThenable(returnValueOfOnOk)) {\n      return;\n    }\n\n    setLoading(true);\n    returnValueOfOnOk.then(function () {\n      setLoading(false, true);\n      onInternalClose.apply(void 0, arguments);\n      clickedRef.current = false;\n    }, e => {\n      // See: https://github.com/ant-design/ant-design/issues/6183\n      setLoading(false, true);\n      clickedRef.current = false; // Do not throw if is `await` mode\n\n      if (isSilent === null || isSilent === void 0 ? void 0 : isSilent()) {\n        return;\n      }\n\n      return Promise.reject(e);\n    });\n  };\n\n  const onClick = e => {\n    if (clickedRef.current) {\n      return;\n    }\n\n    clickedRef.current = true;\n\n    if (!actionFn) {\n      onInternalClose();\n      return;\n    }\n\n    let returnValueOfOnOk;\n\n    if (emitEvent) {\n      returnValueOfOnOk = actionFn(e);\n\n      if (quitOnNullishReturnValue && !isThenable(returnValueOfOnOk)) {\n        clickedRef.current = false;\n        onInternalClose(e);\n        return;\n      }\n    } else if (actionFn.length) {\n      returnValueOfOnOk = actionFn(close); // https://github.com/ant-design/ant-design/issues/23358\n\n      clickedRef.current = false;\n    } else {\n      returnValueOfOnOk = actionFn();\n\n      if (!returnValueOfOnOk) {\n        onInternalClose();\n        return;\n      }\n    }\n\n    handlePromiseOnOk(returnValueOfOnOk);\n  };\n\n  return /*#__PURE__*/React.createElement(Button, Object.assign({}, convertLegacyProps(type), {\n    onClick: onClick,\n    loading: loading,\n    prefixCls: prefixCls\n  }, buttonProps, {\n    ref: buttonRef\n  }), children);\n};\n\nexport default ActionButton;","map":{"version":3,"names":["useState","React","Button","convertLegacyProps","isThenable","thing","then","ActionButton","props","type","children","prefixCls","buttonProps","close","autoFocus","emitEvent","isSilent","quitOnNullishReturnValue","actionFn","clickedRef","useRef","buttonRef","loading","setLoading","onInternalClose","apply","arguments","useEffect","timeoutId","setTimeout","_a","current","focus","clearTimeout","handlePromiseOnOk","returnValueOfOnOk","e","Promise","reject","onClick","length","createElement","Object","assign","ref"],"sources":["/Users/joji/Documents/CODE/React/react-cutioluis/node_modules/antd/es/_util/ActionButton.js"],"sourcesContent":["\"use client\";\n\nimport useState from \"rc-util/es/hooks/useState\";\nimport * as React from 'react';\nimport Button from '../button';\nimport { convertLegacyProps } from '../button/buttonHelpers';\nfunction isThenable(thing) {\n  return !!(thing && thing.then);\n}\nconst ActionButton = props => {\n  const {\n    type,\n    children,\n    prefixCls,\n    buttonProps,\n    close,\n    autoFocus,\n    emitEvent,\n    isSilent,\n    quitOnNullishReturnValue,\n    actionFn\n  } = props;\n  const clickedRef = React.useRef(false);\n  const buttonRef = React.useRef(null);\n  const [loading, setLoading] = useState(false);\n  const onInternalClose = function () {\n    close === null || close === void 0 ? void 0 : close.apply(void 0, arguments);\n  };\n  React.useEffect(() => {\n    let timeoutId = null;\n    if (autoFocus) {\n      timeoutId = setTimeout(() => {\n        var _a;\n        (_a = buttonRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n      });\n    }\n    return () => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, []);\n  const handlePromiseOnOk = returnValueOfOnOk => {\n    if (!isThenable(returnValueOfOnOk)) {\n      return;\n    }\n    setLoading(true);\n    returnValueOfOnOk.then(function () {\n      setLoading(false, true);\n      onInternalClose.apply(void 0, arguments);\n      clickedRef.current = false;\n    }, e => {\n      // See: https://github.com/ant-design/ant-design/issues/6183\n      setLoading(false, true);\n      clickedRef.current = false;\n      // Do not throw if is `await` mode\n      if (isSilent === null || isSilent === void 0 ? void 0 : isSilent()) {\n        return;\n      }\n      return Promise.reject(e);\n    });\n  };\n  const onClick = e => {\n    if (clickedRef.current) {\n      return;\n    }\n    clickedRef.current = true;\n    if (!actionFn) {\n      onInternalClose();\n      return;\n    }\n    let returnValueOfOnOk;\n    if (emitEvent) {\n      returnValueOfOnOk = actionFn(e);\n      if (quitOnNullishReturnValue && !isThenable(returnValueOfOnOk)) {\n        clickedRef.current = false;\n        onInternalClose(e);\n        return;\n      }\n    } else if (actionFn.length) {\n      returnValueOfOnOk = actionFn(close);\n      // https://github.com/ant-design/ant-design/issues/23358\n      clickedRef.current = false;\n    } else {\n      returnValueOfOnOk = actionFn();\n      if (!returnValueOfOnOk) {\n        onInternalClose();\n        return;\n      }\n    }\n    handlePromiseOnOk(returnValueOfOnOk);\n  };\n  return /*#__PURE__*/React.createElement(Button, Object.assign({}, convertLegacyProps(type), {\n    onClick: onClick,\n    loading: loading,\n    prefixCls: prefixCls\n  }, buttonProps, {\n    ref: buttonRef\n  }), children);\n};\nexport default ActionButton;"],"mappings":"AAAA;;AAEA,OAAOA,QAAP,MAAqB,2BAArB;AACA,OAAO,KAAKC,KAAZ,MAAuB,OAAvB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,SAASC,kBAAT,QAAmC,yBAAnC;;AACA,SAASC,UAAT,CAAoBC,KAApB,EAA2B;EACzB,OAAO,CAAC,EAAEA,KAAK,IAAIA,KAAK,CAACC,IAAjB,CAAR;AACD;;AACD,MAAMC,YAAY,GAAGC,KAAK,IAAI;EAC5B,MAAM;IACJC,IADI;IAEJC,QAFI;IAGJC,SAHI;IAIJC,WAJI;IAKJC,KALI;IAMJC,SANI;IAOJC,SAPI;IAQJC,QARI;IASJC,wBATI;IAUJC;EAVI,IAWFV,KAXJ;EAYA,MAAMW,UAAU,GAAGlB,KAAK,CAACmB,MAAN,CAAa,KAAb,CAAnB;EACA,MAAMC,SAAS,GAAGpB,KAAK,CAACmB,MAAN,CAAa,IAAb,CAAlB;EACA,MAAM,CAACE,OAAD,EAAUC,UAAV,IAAwBvB,QAAQ,CAAC,KAAD,CAAtC;;EACA,MAAMwB,eAAe,GAAG,YAAY;IAClCX,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACY,KAAN,CAAY,KAAK,CAAjB,EAAoBC,SAApB,CAA9C;EACD,CAFD;;EAGAzB,KAAK,CAAC0B,SAAN,CAAgB,MAAM;IACpB,IAAIC,SAAS,GAAG,IAAhB;;IACA,IAAId,SAAJ,EAAe;MACbc,SAAS,GAAGC,UAAU,CAAC,MAAM;QAC3B,IAAIC,EAAJ;;QACA,CAACA,EAAE,GAAGT,SAAS,CAACU,OAAhB,MAA6B,IAA7B,IAAqCD,EAAE,KAAK,KAAK,CAAjD,GAAqD,KAAK,CAA1D,GAA8DA,EAAE,CAACE,KAAH,EAA9D;MACD,CAHqB,CAAtB;IAID;;IACD,OAAO,MAAM;MACX,IAAIJ,SAAJ,EAAe;QACbK,YAAY,CAACL,SAAD,CAAZ;MACD;IACF,CAJD;EAKD,CAbD,EAaG,EAbH;;EAcA,MAAMM,iBAAiB,GAAGC,iBAAiB,IAAI;IAC7C,IAAI,CAAC/B,UAAU,CAAC+B,iBAAD,CAAf,EAAoC;MAClC;IACD;;IACDZ,UAAU,CAAC,IAAD,CAAV;IACAY,iBAAiB,CAAC7B,IAAlB,CAAuB,YAAY;MACjCiB,UAAU,CAAC,KAAD,EAAQ,IAAR,CAAV;MACAC,eAAe,CAACC,KAAhB,CAAsB,KAAK,CAA3B,EAA8BC,SAA9B;MACAP,UAAU,CAACY,OAAX,GAAqB,KAArB;IACD,CAJD,EAIGK,CAAC,IAAI;MACN;MACAb,UAAU,CAAC,KAAD,EAAQ,IAAR,CAAV;MACAJ,UAAU,CAACY,OAAX,GAAqB,KAArB,CAHM,CAIN;;MACA,IAAIf,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,EAAhE,EAAoE;QAClE;MACD;;MACD,OAAOqB,OAAO,CAACC,MAAR,CAAeF,CAAf,CAAP;IACD,CAbD;EAcD,CAnBD;;EAoBA,MAAMG,OAAO,GAAGH,CAAC,IAAI;IACnB,IAAIjB,UAAU,CAACY,OAAf,EAAwB;MACtB;IACD;;IACDZ,UAAU,CAACY,OAAX,GAAqB,IAArB;;IACA,IAAI,CAACb,QAAL,EAAe;MACbM,eAAe;MACf;IACD;;IACD,IAAIW,iBAAJ;;IACA,IAAIpB,SAAJ,EAAe;MACboB,iBAAiB,GAAGjB,QAAQ,CAACkB,CAAD,CAA5B;;MACA,IAAInB,wBAAwB,IAAI,CAACb,UAAU,CAAC+B,iBAAD,CAA3C,EAAgE;QAC9DhB,UAAU,CAACY,OAAX,GAAqB,KAArB;QACAP,eAAe,CAACY,CAAD,CAAf;QACA;MACD;IACF,CAPD,MAOO,IAAIlB,QAAQ,CAACsB,MAAb,EAAqB;MAC1BL,iBAAiB,GAAGjB,QAAQ,CAACL,KAAD,CAA5B,CAD0B,CAE1B;;MACAM,UAAU,CAACY,OAAX,GAAqB,KAArB;IACD,CAJM,MAIA;MACLI,iBAAiB,GAAGjB,QAAQ,EAA5B;;MACA,IAAI,CAACiB,iBAAL,EAAwB;QACtBX,eAAe;QACf;MACD;IACF;;IACDU,iBAAiB,CAACC,iBAAD,CAAjB;EACD,CA7BD;;EA8BA,OAAO,aAAalC,KAAK,CAACwC,aAAN,CAAoBvC,MAApB,EAA4BwC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBxC,kBAAkB,CAACM,IAAD,CAApC,EAA4C;IAC1F8B,OAAO,EAAEA,OADiF;IAE1FjB,OAAO,EAAEA,OAFiF;IAG1FX,SAAS,EAAEA;EAH+E,CAA5C,EAI7CC,WAJ6C,EAIhC;IACdgC,GAAG,EAAEvB;EADS,CAJgC,CAA5B,EAMhBX,QANgB,CAApB;AAOD,CA1FD;;AA2FA,eAAeH,YAAf"},"metadata":{},"sourceType":"module"}